<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact — Simple</title>
  <meta name="description" content="Minimal black & white contact form, single file." />
  <style>
    /* Black & white, minimal */
    :root{--bg:#ffffff;--fg:#0b0b0b;--muted:#4b4b4b;--radius:10px}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:var(--bg);
      color:var(--fg);
      display:flex;align-items:center;justify-content:center;padding:24px;
    }
    .container{width:100%;max-width:420px}
    .form-card{
      border-radius:var(--radius);
      padding:28px;
      border:1px solid #e6e6e6;
      box-shadow: 0 6px 18px rgba(11,11,11,0.03);
      background:transparent;
    }
    h1{margin:0 0 18px 0;font-size:20px;font-weight:600}
    form{display:flex;flex-direction:column;gap:12px}
    label{font-size:13px;color:var(--muted)}
    input[type=text], input[type=email]{
      width:100%;padding:12px 14px;border-radius:8px;border:1px solid #ddd;background:#fff;color:var(--fg);font-size:14px;
    }
    input:focus{outline:2px solid rgba(0,0,0,0.06)}
    button{
      padding:10px 14px;border-radius:8px;border:0;background:#000;color:#fff;font-weight:600;cursor:pointer;font-size:14px
    }
    .message{margin-top:12px;padding:10px;border-radius:8px;font-size:14px;display:none}
    .message.show{display:block}
    .message.success{background:#f2f9f2;border:1px solid #d7efd7;color:#0b6a0b}
    .message.error{background:#fff5f5;border:1px solid #f1c0c0;color:#9a1b1b}
    .small{font-size:13px;color:var(--muted);margin-top:10px}

    @media (max-width:480px){.container{padding:8px}}
  </style>
</head>
<body>
  <div class="container">
    <div class="form-card" role="region" aria-labelledby="title">
      <h1 id="title">Contact</h1>

      <!-- Minimal form (exact fields requested) -->
      <!-- Note: we keep action pointing to FormSubmit but submit via JS using `mode: 'no-cors'` to avoid leaving the page and to reduce CORS failures in sandboxed environments. -->
      <form id="contactForm" action="https://formsubmit.co/ibbchoudhary@gmail.com" method="POST" novalidate>
        <label for="name">Name</label>
        <input id="name" name="name" type="text" required autocomplete="name" placeholder="Your name">

        <label for="email">Email</label>
        <input id="email" name="email" type="email" required autocomplete="email" placeholder="you@example.com">

        <button id="sendBtn" type="submit">Send</button>

        <div id="msg" class="message" role="status" aria-live="polite"></div>
      </form>

      <p class="small">This page will not leave your site on submit — success and errors are shown here. If the environment blocks network calls, a fallback method will attempt submission.</p>
    </div>
  </div>

  <script>
    (function(){
      const form = document.getElementById('contactForm');
      const btn = document.getElementById('sendBtn');
      const msg = document.getElementById('msg');

      function show(type, text){
        msg.className = 'message show ' + (type === 'success' ? 'success' : 'error');
        msg.textContent = text;
      }

      // helper: create an invisible iframe fallback and submit the form targeting it
      function submitWithIframe(formEl){
        return new Promise((resolve) => {
          // create hidden iframe
          const iframe = document.createElement('iframe');
          iframe.name = 'hidden-form-target-' + Date.now();
          iframe.style.display = 'none';
          document.body.appendChild(iframe);

          // set form target and submit
          const previousTarget = formEl.target;
          formEl.target = iframe.name;

          // We cannot reliably read cross-origin iframe responses. We assume submission attempted once iframe loads (or after timeout).
          const done = () => {
            // cleanup
            try{ formEl.target = previousTarget; } catch(e){}
            setTimeout(()=>{ document.body.removeChild(iframe); }, 500);
            resolve();
          };

          // Some servers redirect; listen to load event as a sign request finished
          iframe.addEventListener('load', done);

          // safety timeout in case load never fires
          const to = setTimeout(()=>{ done(); clearTimeout(to); }, 4000);

          formEl.submit();
        });
      }

      form.addEventListener('submit', async function(e){
        e.preventDefault(); // keep user on this page

        // simple client-side check
        if (!form.checkValidity()){
          show('error', 'Please complete the required fields.');
          return;
        }

        btn.disabled = true;
        show('success', 'Sending...');

        const fd = new FormData(form);

        // We'll first try fetch with mode: 'no-cors'.
        // Reason: many sandboxed environments or FormSubmit may not provide CORS headers.
        // Using 'no-cors' lets the browser attempt the POST without throwing a CORS error, but the response will be opaque.
        // We treat a successful network completion as success for UX (since we can't inspect the body).
        try{
          await fetch(form.action, {
            method: 'POST',
            body: fd,
            mode: 'no-cors',
            cache: 'no-cache',
          });

          // If fetch didn't throw, we consider submission attempted and show success.
          show('success', 'Thanks — your message was submitted.');
          form.reset();
        } catch (err){
          // If fetch throws (network blocked), fallback to iframe submission.
          console.warn('fetch failed, falling back to iframe submit:', err);
          try{
            await submitWithIframe(form);
            show('success', 'Thanks — your message was submitted (fallback).');
            form.reset();
          } catch (e){
            console.error('iframe fallback failed:', e);
            show('error', 'Could not send message. Please try again later or contact directly via email.');
          }
        } finally{
          // re-enable button after short delay so user can re-submit if needed
          setTimeout(()=>{ btn.disabled = false; }, 800);
        }

      });
    })();
  </script>
</body>
</html>
